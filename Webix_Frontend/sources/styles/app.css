/* CSS Custom Properties for Theming */
:root {
    /* Light Theme Colors */
    --bg-primary: #ffffff;
    --bg-secondary: #f5f5f5;
    --text-primary: #333333;
    --text-secondary: #666666;
    --border-color: #e0e0e0;
    --primary-color: #2196F3;
    --accent-color: #4CAF50;
    --error-color: #f44336;
    --success-color: #4CAF50;
    --warning-color: #ff9800;
    
    /* Default Font Settings */
    --base-font-size: 14px;
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* Dark Theme */
[data-theme="dark"] {
    --bg-primary: #1e1e1e;
    --bg-secondary: #2d2d2d;
    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --border-color: #444444;
    --primary-color: #42A5F5;
    --accent-color: #66BB6A;
}

/* Font Sizes */
[data-font-size="small"] {
    --base-font-size: 12px;
}

[data-font-size="medium"] {
    --base-font-size: 14px;
}

[data-font-size="large"] {
    --base-font-size: 16px;
}

[data-font-size="extra-large"] {
    --base-font-size: 18px;
}

/* Font Families */
[data-font-family="system"] {
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

[data-font-family="sans-serif"] {
    --font-family: Arial, Helvetica, sans-serif;
}

[data-font-family="serif"] {
    --font-family: Georgia, "Times New Roman", Times, serif;
}

[data-font-family="monospace"] {
    --font-family: "Courier New", Courier, monospace;
}

/* High Contrast Mode */
[data-high-contrast="true"] {
    --bg-primary: #000000;
    --bg-secondary: #1a1a1a;
    --text-primary: #ffffff;
    --text-secondary: #e0e0e0;
    --border-color: #ffffff;
    --primary-color: #00ffff;
    --accent-color: #00ff00;
}

/* Global Styles with Theme Variables */
body {
    font-family: var(--font-family);
    font-size: var(--base-font-size);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    margin: 0;
    padding: 0;
    transition: background-color 0.3s ease, color 0.3s ease;
}

.app_title .webix_el_label {
    font-size: 18px;
    font-weight: bold;
    padding-left: 15px;
    color: var(--text-primary);
}

.error_message {
    padding-left: 150px;
    margin-top: -10px;
    margin-bottom: 5px;
    color: var(--error-color);
}

.webix_view,
.webix_el_box, /* A common container for form elements */
.webix_inp_static,
.webix_el_text input,
.webix_el_combo input,
.webix_el_select select,
.webix_inp_textarea,
.webix_button,
.webix_list_item,
.webix_item_tab,
.webix_template {
    font-family: var(--font-family) !important; /* Use !important here to ensure override */
    font-size: var(--base-font-size) !important; /* Use !important here to ensure override */
}

/* We still need a base rule for background and color on the main view container */
.webix_view {
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

.webix_template {
    color: var(--text-primary);
}

/* Buttons */
.webix_primary {
    background-color: var(--primary-color) !important;
    border-color: var(--primary-color) !important;
}

/* Focus indicators for accessibility */
*:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* Notification Form Specific Styles */
.notification-preferences-form {
    overflow: visible !important;
}

.notification-preferences-form .webix_view,
.notification-preferences-form .webix_el_box,
.notification-preferences-form .webix_control {
    max-width: 100% !important;
    box-sizing: border-box !important;
    overflow: visible !important;
}

.notification-preferences-form .webix_label_right,
.notification-preferences-form .webix_radio_option,
.notification-preferences-form .webix_el_label {
    white-space: normal !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    line-height: 1.6 !important;
    padding: 4px 0 !important;
}

.notification-preferences-form .webix_el_checkbox,
.notification-preferences-form .webix_el_radio {
    margin-bottom: 12px !important;
    min-height: 30px !important;
}

.notification-preferences-form .webix_inp_checkbox_border,
.notification-preferences-form .webix_inp_radio_border {
    margin-top: 4px !important;
    align-self: flex-start !important;
}

.notification-preferences-form .webix_radio {
    display: flex !important;
    flex-wrap: wrap !important;
    overflow: visible !important;
    width: 100% !important;
    min-height: 50px !important;
}

.notification-preferences-form .webix_radio_option {
    flex-shrink: 0 !important;
    margin-right: 20px !important;
    margin-bottom: 10px !important;
    white-space: nowrap !important;
}

.notification-preferences-form .webix_scroll_cont {
    overflow: visible !important;
}

@media (max-width: 900px) {
    .notification-preferences-form .webix_radio {
        flex-direction: column !important;
        align-items: flex-start !important;
    }
    
    .notification-preferences-form .webix_radio_option {
        margin-right: 0 !important;
        margin-bottom: 12px !important;
    }
}

/* Card Rows for Settings */
.privacy-setting-row,
.notification-setting-row {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 8px;
    transition: all 0.3s ease;
}

.privacy-setting-row:hover,
.notification-setting-row:hover {
    background: var(--bg-secondary);
    border-color: var(--text-secondary);
}



/* Theme Settings */
.theme-settings-form {
    overflow: visible !important;
}

.theme-preview-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 8px;
    transition: all 0.3s ease;
}

.theme-preview-light {
    background: #ffffff;
    color: #333333;
}

.theme-preview-light h2 {
    color: #1a1a1a;
}

.theme-preview-light button {
    background: #2196F3;
    color: #ffffff;
    border: none;
    border-radius: 4px;
}

.theme-preview-dark {
    background: #1e1e1e;
    color: #e0e0e0;
    border-color: #444444;
}

.theme-preview-dark h2 {
    color: #ffffff;
}

.theme-preview-dark button {
    background: #4CAF50;
    color: #ffffff;
    border: none;
    border-radius: 4px;
}

/* Comprehensive Dark Theme Webix Styling */
.webix_form,
.webix_el_box,
.webix_scroll_cont {
    background-color: var(--bg-primary) !important;
}

.webix_inp_static,
.webix_el_text input,
.webix_el_combo input,
.webix_el_select select,
.webix_inp_textarea {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

.webix_inp_label,
.webix_el_label div {
    color: var(--text-primary) !important;
}

.webix_el_radio,
.webix_el_checkbox {
    background-color: var(--bg-primary) !important;
}

.webix_segment_0,
.webix_segment_1,
.webix_segment_2,
.webix_segment_N {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

.webix_segment_0.webix_selected,
.webix_segment_1.webix_selected,
.webix_segment_2.webix_selected,
.webix_segment_N.webix_selected {
    background-color: var(--primary-color) !important;
    color: #ffffff !important;
}

.webix_el_switch {
    background-color: var(--bg-primary) !important;
}

.webix_button,
.webix_el_button button {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

.webix_button:hover {
    background-color: var(--border-color) !important;
}

.webix_scroll_body {
    background-color: var(--bg-primary) !important;
}

.webix_item_tab {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

.webix_item_tab.webix_selected {
    background-color: var(--bg-primary) !important;
    border-bottom-color: var(--primary-color) !important;
}

.webix_toolbar {
    background-color: var(--bg-secondary) !important;
    border-color: var(--border-color) !important;
}

.webix_list_item {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

.webix_list {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

.webix_list .webix_list_item:hover {
    background-color: var(--bg-secondary) !important;
}

.webix_cal_body {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

.webix_cal_header {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}

.webix_template h1,
.webix_template h2,
.webix_template h3,
.webix_template h4,
.webix_template h5,
.webix_template h6 {
    color: var(--text-primary) !important;
}

.webix_template p {
    color: var(--text-secondary) !important;
}

.webix_popup,
.webix_window {
    background-color: var(--bg-primary) !important;
    border-color: var(--border-color) !important;
}

.webix_message_area {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}

.webix_radio_option {
    color: var(--text-primary) !important;
}

.webix_label_right {
    color: var(--text-primary) !important;
}

/***********************************************/

/* High Contrast Mode for Accessibility */
body.high-contrast {
    --bg-primary: #000000;
    --bg-secondary: #1a1a1a;
    --text-primary: #ffffff;
    --text-secondary: #ffff00;
    --border-color: #ffffff; 
    --primary-color: #00ffff;
    --accent-color: #00ff00;
    
    color: var(--text-primary) !important; 
}

/* Base Webix view styling */
body.high-contrast .webix_view {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border-color: transparent !important; 
}


body.high-contrast .webix_inp_static,
body.high-contrast .webix_el_text input,
body.high-contrast .webix_el_combo input,
body.high-contrast .webix_el_select select,
body.high-contrast .webix_inp_textarea textarea {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border: 2px solid var(--border-color) !important; 
    padding: 2px !important; 
}

/* Buttons */
body.high-contrast .webix_button {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border: 2px solid var(--border-color) !important; /* Clear border for buttons */
    box-shadow: none !important; 
}

body.high-contrast .webix_button:hover,
body.high-contrast .webix_button.webix_hover,
body.high-contrast .webix_button:focus,
body.high-contrast .webix_inp_static:focus-within,
body.high-contrast .webix_el_text input:focus,
body.high-contrast .webix_el_combo input:focus,
body.high-contrast .webix_el_select select:focus {
    background-color: #333333 !important; 
    border-color: var(--primary-color) !important; 
    color: var(--primary-color) !important;
}
body.high-contrast .webix_button.webix_active {
    background-color: #555555 !important; /*  darker when active/pressed */
    border-color: var(--primary-color) !important;
}


/* Checkboxes and Radio buttons */
body.high-contrast .webix_el_checkbox label,
body.high-contrast .webix_el_radio label {
    color: var(--text-primary) !important;
}
body.high-contrast .webix_checkbox_v_label:before,
body.high-contrast .webix_radio_v_label:before {
    border: 2px solid var(--border-color) !important;
    background-color: var(--bg-secondary) !important;
}
body.high-contrast .webix_checkbox_v_label.webix_checked:before,
body.high-contrast .webix_radio_v_label.webix_checked:before {
    background-color: var(--primary-color) !important; /* Checked state background */
    border-color: var(--primary-color) !important;
}
body.high-contrast .webix_checkbox_v_label.webix_checked:after {
    border-color: var(--text-primary) !important; /* Checkmark color */
}


/* Switch (Toggle) component */
body.high-contrast .webix_switch_label {
    color: var(--text-primary) !important;
}
body.high-contrast .webix_switch_button {
    background-color: var(--bg-secondary) !important;
    border: 2px solid var(--border-color) !important;
}
body.high-contrast .webix_switch_button .webix_switch_handle {
    background-color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}
body.high-contrast .webix_switch_button.webix_checked {
    background-color: var(--primary-color) !important; /* Active state */
    border-color: var(--primary-color) !important;
}


body.high-contrast .webix_template {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
   
}
body.high-contrast .webix_template h3,
body.high-contrast .webix_template h4,
body.high-contrast .webix_template p,
body.high-contrast .webix_template span {
    color: var(--text-primary) !important; /*  all text inside templates is white */
}
body.high-contrast .privacy-setting-row,
body.high-contrast .notification-setting-row {
    background-color: var(--bg-secondary) !important; 
    border: 2px solid var(--border-color) !important; 
    margin-bottom: 10px !important; 
    padding: 10px 15px !important; 
    box-sizing: border-box !important; 
}
body.high-contrast .privacy-setting-row span,
body.high-contrast .notification-setting-row span {
    color: var(--text-primary) !important;
}

body.high-contrast h3,
body.high-contrast h4 {
    color: var(--text-primary) !important;
}
body.high-contrast p {
    color: var(--text-primary) !important;
}
body.high-contrast .webix_template p[style*="color: var(--text-secondary)"] {
    color: var(--text-secondary) !important; 
}


body.high-contrast a {
    color: var(--primary-color) !important;
    text-decoration: underline !important;
}
body.high-contrast a:hover {
    color: var(--accent-color) !important; 
}

body.high-contrast .webix_list_item {
    color: var(--text-primary) !important;
    background-color: var(--bg-primary) !important;
    border-bottom: 1px solid var(--bg-secondary) !important; 
}
body.high-contrast .webix_list_item.webix_selected,
body.high-contrast .webix_list_item:hover {
    background-color: var(--bg-secondary) !important;
    color: var(--primary-color) !important;
    border-left: 4px solid var(--primary-color) !important;
}

